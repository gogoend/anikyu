function t(t,e,n){return Math.max(e,Math.min(n,t))}function e(t,e,n,i){t.fireEvent(e,{type:e,target:n,detail:i})}function n(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now?Date.now():(new Date).getTime()}let i=function(){this.listeners={}};i.prototype=Object.assign({},{listeners:null,addEventListener(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)},removeEventListener(t,e){if(!(t in this.listeners))return;let n=this.listeners[t];for(let t=0;t<n.length;t++)if(n[t]===e)return void n.splice(t,1)},fireEvent(t,e){if(!(t in this.listeners))return!0;let n=this.listeners[t].concat();for(let t=0;t<n.length;t++)n[t].call(this,e)},getListeners(t){return t?this.listeners[t]:this.listeners}});const r={linear:function(t){return t},step:function(t,e){e=e?Math.ceil(e):10;for(var n=1;t>n*(1/e);)n++;return n*(1/e)},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-r.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*r.bounceIn(2*t):.5*r.bounceOut(2*t-1)+.5}};let a=Object.assign(r);function u(t,e,n,i,r){return(e-t)*i(n,r)}function s(i){isNaN(parseInt(i))||(this.i=i);let{el:r,i:s,queue:o,next:c,status:l,config:h,reqAniHandler:f}=this;if(cancelAnimationFrame(f),!o[s]||!o[s+1])return;let m=o[s].props,p=o[s+1].props,d=void 0!==o[s+1].delay?o[s+1].delay:0,M=this.i+1;for(let t in m)r[t]=m[t];let I=o[s+1].easeType?o[s+1].easeType:h.easeType,q=o[s+1].duration?o[s+1].duration:h.duration,O=o[s+1].step?o[s+1].step:void 0;l.startTime=n()+d;for(let t in p)if(void 0===m[t])for(var v=s;v>=0;v--)void 0===o[v].props[t]?0===v&&void 0===o[v].props[t]&&(void 0===r[t]||isNaN(parseFloat(r[t]))?m[t]=0:m[t]=parseFloat(r[t])):m[t]=o[v].props[t];let g=()=>{if(!l.paused){let i=t((n()-l.startTime)/q,0,1),s={},f={},v={};for(let t in m){let e=parseFloat(m[t]),n=parseFloat(p[t]);s[t]=e+u(e,n,i,a[I],O),f[t]=(void 0===s[t]?0:s[t])-(void 0===e?0:e),v[t]=(void 0===s[t]?0:s[t])-(void 0===r[t]?0:parseFloat(r[t]))}if(Object.assign(r,s),e(this,"animate",r,{stageIndex:this.i,name:o[M].name?o[M].name:"",progress:i,value:s,stageDelta:f,frameDelta:v}),1==i)return void setTimeout(()=>{for(let t in p)r[t]=p[t];e(this,"finish",r,{stageIndex:M,name:o[M].name?o[M].name:""}),h.manualNext||c.call(this)},d)}this.reqAniHandler=requestAnimationFrame(g)};setTimeout(g,d)}class o extends i{constructor(t,e,n){super(),this.el=t,this.queue=e;this.config=Object.assign(JSON.parse(JSON.stringify({duration:2e3,easeType:"quadraticInOut",manualNext:!1})),n),this.i=0,this.status={paused:!1},this.queue[0]&&(this.config.manualNext||s.call(this),this.reqAniHandler=null)}pause(){let{status:t}=this;if(t.paused)return;let e=n();t.passedTime=e-t.startTime,t.paused=!0}resume(){let{status:t}=this;if(!t.paused)return;let e=n();t.startTime=e-t.passedTime,t.paused=!1}replay(){let{status:t,queue:e,i:n,resume:i}=this;e[n]&&(t.paused&&i.bind(this)(),s.call(this,n))}jump(t,e){let{status:n,queue:i,resume:r}=this;i[t]&&(n.paused&&r.bind(this)(),s.call(this,e?t-2:t-1))}prev(){let{status:t,queue:e,i:n,resume:i}=this;e[n-1]&&(t.paused&&i.bind(this)(),this.i--,s.call(this))}next(){let{status:t,queue:e,i:n,resume:i}=this;e[n+1]&&(t.paused&&i.bind(this)(),this.i++,s.call(this))}dispose(){let{queue:t,i:n,reqAniHandler:i,el:r}=this,a=n+1;cancelAnimationFrame(i),e(this,"dispose",r,{stageIndex:n,name:t[a].name?t[a].name:""})}}Object.assign(o,{getStyle:function(t,e){return t.currentStyle?t.currentStyle[e]:getComputedStyle(t,!1)[e]},rand:function(t,e){return Math.random()*(e-t)+t},clamp:t,mixEaseFn:function(t){for(let e in t)a[e]=t[e]}}),function(t){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),a=t.setTimeout((function(){n(i+r)}),r);return e=i+r,a}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}("undefined"==typeof window?global:window);export default o;
